<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RFP - Supplier Portal</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
 <style>
    :root{
      --sidebar-width: 260px;
      --navbar-height: 64px;
      --accent: #0d6efd;
      --muted: #6c757d;
    }

    html,body { height: 100%; margin: 0; font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial; background: #f8f9fa; }

    /* NAVBAR (light green) */

    .topbar {
      height: var(--navbar-height);
      background: #7dd170; /* light green */
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 16px;
      position: fixed;
      left: var(--sidebar-width);
      right: 0;
      top: 0;
      z-index: 1100;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: left .25s ease;
    
    }

     
    .nav-actions { display: flex; align-items: center; gap: 15px; }
    .nav-icon { cursor: pointer; font-size: 1.2rem; position: relative; }
    .icon-badge::after { content: attr(data-count); position: absolute; top: -6px; right: -8px; background: red; color: white; font-size: 0.7rem; padding: 2px 5px; border-radius: 50%; display: none; }
    .icon-badge[data-count]:not([data-count="0"])::after { display: inline-block; }
    /* brand */
    .brand {
      font-weight: 700;
      color: #134611;
    }

    /* navbar right icons spacing & style */
    .nav-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      margin-left: 8px;
      border-radius: 8px;
      cursor: pointer;
      color: #13340f;
      transition: background .2s, transform .12s;
    }
    .nav-icon:hover { background: rgba(0,0,0,0.06); transform: translateY(-1px); }
    .nav-icon .bi { font-size: 1.15rem; }

    /* small badge for counts (optional style) */
    .icon-badge {
      position: relative;
    }
    .icon-badge .badge {
      position: absolute;
      top: -6px;
      right: -6px;
      font-size: 0.6rem;
    }

    /* layout: sidebar + content */
    .layout {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar (light) */
    .sidebar {
      width: var(--sidebar-width);
      background: #f1f5f2;
      padding: 18px 12px;
      padding-top: calc(var(--navbar-height) + 14px); /* start under navbar */
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      overflow-y: auto;
      box-shadow: 2px 0 6px rgba(0,0,0,0.04);
      transition: transform .28s ease;
      z-index: 1050;
    }
    .sidebar.collapsed { transform: translateX(-110%); }

    .sidebar .nav-section { margin-bottom: 6px; }
    .sidebar .nav-link {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 9px 10px;
      color: #213426;
      border-radius: 8px;
      text-decoration: none;
      margin-bottom: 4px;
      transition: background .18s;
    }
    .sidebar .nav-link:hover { background: #e6f0e6; color: orange; }

    .sidebar .nav-left { display: flex; gap: 10px; align-items: center; }
    .sidebar .nav-left .bi { font-size: 1.05rem; color: var(--accent); }

    /* submenu slide (animated) */
    .submenu {
      max-height: 0;
      overflow: hidden;
      transition: max-height .32s ease, padding .2s ease;
      padding-left: 36px;
    }
    .submenu.show {
      max-height: 420px; /* enough room */
      padding-top: 8px;
      padding-bottom: 8px;
    }
    .submenu a {
      display:block;
      padding:8px 12px;
      text-decoration:none;
      color:#183f28;
      border-radius:6px;
      margin-bottom:4px;
    }
    .submenu a:hover { background:#e6f0e6; color:orange; }

    /* main content area */
    .content {
      margin-left: var(--sidebar-width);
      margin-top: var(--navbar-height);
      padding: 22px;
      flex: 1;
      transition: margin-left .28s ease;
    }
    .sidebar.collapsed ~ .content {
      margin-left: 0;
    }
    .sidebar.collapsed ~ .topbar { left: 0; }

    /* cards grid: 3 on top, 4 on next row */
    .cards-top {
      display: grid;
      grid-template-columns: repeat(3,1fr);
      gap: 16px;
      margin-bottom: 18px;
    }
    .cards-bottom {
      display: grid;
      grid-template-columns: repeat(4,1fr);
      gap: 16px;
      margin-bottom: 20px;
       
    }

    .stat-card {
     
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.04);
      display:flex;
      align-items:center;
      gap: 12px;
      cursor:pointer;
      transition: transform .16s ease, box-shadow .16s;
       color: white;
    }
    .stat-card:hover { transform: translateY(-6px); box-shadow: 0 12px 28px rgba(0,0,0,0.06); }
    .stat-icon {
      width:56px;height:56px;border-radius:10px;
      display:flex;align-items:center;justify-content:center;font-size:1.6rem;color:white;
      flex-shrink:0;
    }
    .stat-body { flex:1; }
    .stat-title { font-size:0.85rem;color:var(--muted); margin:0; }
    .stat-value { font-size:1.55rem;font-weight:700;margin:4px 0 0;color:#222; }

    /* colored icon backgrounds */
    .c-admin{background: linear-gradient(135deg,#3b82f6,#2563eb);}  /* blue */
    .c-client{background: linear-gradient(135deg,#10b981,#059669);} /* green */
    .c-supplier{background: linear-gradient(135deg,#fb923c,#f97316);}/* orange */
    .c-open{background: linear-gradient(135deg,#06b6d4,#0891b2);}    /* teal */
    .c-closed{background: linear-gradient(135deg,#94a3b8,#6b7280);}  /* gray */
    .c-applied{background: linear-gradient(135deg,#f59e0b,#d97706);} /* amber */
    .c-approved{background: linear-gradient(135deg,#7c3aed,#6d28d9);} /* purple */

    /* Open tenders table */
    .table-card {
      margin-top: 8px;
      background: white;
      padding: 14px;
      border-radius: 10px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.03);
    }

    /* popups anchored to icons */
    .floating-popup {
      position: absolute;
      width: 260px;
      max-width: 40vw;
      background: white;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      padding: 10px;
      z-index: 1200;
      display: none;
    }
    .floating-popup .item {
      display:flex; gap:10px; align-items:center; padding:8px 6px; border-bottom:1px solid #f0f0f0;
    }
    .floating-popup .item:last-child{border-bottom:none;}
    .floating-popup .item .bi { font-size:1.05rem; color:var(--accent); width:28px; text-align:center; }
    .floating-popup h6{margin:0 0 8px 0;font-size:0.95rem;color:var(--accent);}

    /* Responsive */
    @media (max-width: 991px) {
      .cards-top { grid-template-columns: repeat(2,1fr); }
      .cards-bottom { grid-template-columns: repeat(2,1fr); }
    }
    @media (max-width: 768px) {
      .topbar { left: 0; padding: 0 10px; }
      .sidebar { transform: translateX(-110%); position: fixed; z-index:1300; }
      .sidebar.visible { transform: translateX(0); }
      .content { margin-left: 0; padding: 14px; margin-top: var(--navbar-height); }
      .cards-top { grid-template-columns: 1fr; }
      .cards-bottom { grid-template-columns: repeat(2,1fr); }
    }
    /* --- Top Navbar Styling --- */
.navbar-custom {
  margin-left: 260px; /* keeps space for sidebar */
  background: #90ee90; /* light green */
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
}

.navbar-custom .left span {
  font-size: 1.3rem;
  font-weight: bold;
  color: #1e1e2f;
}

.navbar-custom .right {
  display: flex;
  align-items: center;
  gap: 25px; /* spacing between icons */
}

.icon-wrapper {
  position: relative;
  cursor: pointer;
}

.icon-wrapper i {
  font-size: 1.4rem;
  color: #1e1e2f;
}

.icon-wrapper .badge {
  position: absolute;
  top: -5px;
  right: -10px;
  background: red;
  color: #fff;
  font-size: 0.7rem;
  border-radius: 50%;
  padding: 3px 6px;
}

/* Dropdown menus for email, sms, notification */
.navbar-custom .dropdown-menu {
  min-width: 250px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  border-radius: 8px;
  border: none;
}

.navbar-custom .dropdown-menu .dropdown-item {
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 8px;
}

.navbar-custom .dropdown-menu .dropdown-item i {
  font-size: 1rem;
  color: #0d6efd;
}

/* Profile dropdown */
.navbar-custom .dropdown-menu .dropdown-item.text-danger {
  color: #dc3545 !important;
}

.navbar-custom .dropdown-menu .dropdown-item.text-danger:hover {
  background: #f8d7da;
  color: #a71d2a !important;
}

/* Responsive tweaks */
@media (max-width: 768px) {
  .navbar-custom {
    margin-left: 0;
    flex-wrap: wrap;
  }
  .navbar-custom .left {
    width: 100%;
    margin-bottom: 10px;
  }
  .navbar-custom .right {
    width: 100%;
    justify-content: flex-end;
  }
}
  </style>
</head>
<body>

  
    <!-- Sidebar -->
<nav class="sidebar" id="sidebar">
  <div class="mb-3 ps-2 text-center">
    <!-- Replace text with logo -->
    <a href="/admin/dashsup">
      <img src="/images/bs.png" alt="eazyProcure Logo" class="img-fluid" style="max-width:200px;">
    </a>
  </div>

  <!-- Dashboard -->
  <div class="nav-section">
    <a href="/admin/dashsup" class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">Dashboard -Supplier</span></div>
    </a>
  </div>

  <!-- Permissions & Roles -->
  <!-- <div class="nav-section">
    <a href="#" class="nav-link" data-toggle="submenu" data-target="permSub">
      <div class="nav-left"><i class="bi bi-shield-lock-fill" style="color: green;"></i><span class="ms-2">Permissions & Roles</span></div>
      <i class="bi bi-plus-lg"></i>
    </a>
    <div id="permSub" class="submenu">
      <a href="/admin/permissions"><i class="bi bi-key-fill me-2" style="color: green;"></i> Permissions</a>
      <a href="/admin/roles"><i class="bi bi-award-fill me-2"></i> Roles</a>
    </div>
  </div> -->

  <!-- Manage Users -->
  <div class="nav-section">
    <a href="#" class="nav-link" data-toggle="submenu" data-target="usersSub">
      <div class="nav-left"><i class="bi bi-people-fill" style="color: green;"></i><span class="ms-2">Manage Users</span></div>
      <i class="bi bi-plus-lg"></i>
    </a>
    <div id="usersSub" class="submenu">
      <a href="/admin/mysuplier"><i class="bi bi-truck me-2" style="color: green;"></i> Manage Suppliers</a>
    </div>
  </div>
  <!-- statutory -->
  <div class="nav-section">
    <a href="/admin/doc" class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">Statutory Rquirement</span></div>
    </a>
  </div>
  <!-- Alerts -->
  <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#alertModal">
    <div class="nav-left"><i class="bi bi-bell-fill" style="color: green;"></i><span class="ms-2">Alerts</span></div>
  </a>
    <!-- supplier prequalification -->
       <div class="nav-section">
    <a href="#" class="nav-link" data-toggle="submenu" data-target="msgSub">
      <div class="nav-left"><i class="bi bi-people-fill" style="color: green;"></i><span class="ms-2">prequalification</span></div>
      <i class="bi bi-plus-lg"></i>
    </a>
    <div id="msgSub" class="submenu">
      <a href="/admin/prequal"><i class="bi bi-person-badge me-2" style="color: green;"></i> My Applications</a>
     
    </div>
  </div>

  <!-- tenders -->
     <div class="nav-section">
    <a href="/admin/tenders"  class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">Tender</span></div>
    </a>
  </div>
   <!-- rfx -->
         <div class="nav-section">
    <a href="/admin/rfqs" class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">RFQ</span></div>
    </a>
  </div>
       <div class="nav-section">
    <a href="/admin/rfps"class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">RFP</span></div>
    </a>
  </div>
       <div class="nav-section">
    <a href="/admin/eois" class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">EOI</span></div>
    </a>
  </div>
       <div class="nav-section">
    <a href="/admin/rfis" class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">RFI</span></div>
    </a>
  </div>
         <div class="nav-section">
    <a href="/admin/auction " class="nav-link">
      <div class="nav-left"><i class="bi bi-speedometer2" style="color: green;"></i><span class="ms-2">Reverse Auction</span></div>
    </a>
  </div>

 
 
  <!-- Reports -->
  <div class="nav-section">
    <a href="#" class="nav-link" data-toggle="submenu" data-target="reportsSub">
      <div class="nav-left"><i class="bi bi-graph-up-arrow" style="color: green;"></i><span class="ms-2">Archive</span></div>
      <i class="bi bi-plus-lg" style="color: green;"></i>
    </a>
    <div id="reportsSub" class="submenu">
      <a href="/admin/reports"><i class="bi bi-check2-circle me-2" style="color: green;"></i>Reports</a>
    </div>
  </div>
</nav>


    <!-- Top Navbar (light green) -->
   <header class="topbar" id="topbar" style="background-color: #008000; height: 8%;">
  <div class="d-flex align-items-center">
    <button class="btn btn-sm btn-light me-2 d-lg-none" id="hamburgerBtn">
      <i class="bi bi-list"></i>
    </button>
    <div class="brand"><span class="text-success"></span></div>
  </div>

  <div class="nav-actions position-relative">
    <div class="nav-icon icon-badge" id="emailIcon" title="Email" data-count="5">
      <i class="bi bi-envelope-fill"></i>
    </div>
    <div class="nav-icon icon-badge" id="smsIcon" title="SMS" data-count="4">
      <i class="bi bi-chat-dots-fill"></i>
    </div>
    <div class="nav-icon icon-badge" id="notifIcon" title="Notifications" data-count="2">
      <i class="bi bi-bell-fill"></i>
    </div>
    <div class="nav-icon" id="profileIcon" title="Profile">
      <i class="bi bi-person-circle"></i>
    </div>
  </div>
  
</header>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RFP Submission</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* small custom tweaks */
    body { padding: 1rem; background: #f8f9fa; }
    .left-nav-placeholder, .top-nav-placeholder {
      border: 1px dashed #ced4da;
      background: white;
      padding: .75rem;
      margin-bottom: 1rem;
      color: #6c757d;
      text-align: center;
    }
    .card { margin-bottom: 1rem; }
    .required::after { content: " *"; color: #d63384; }
    .table-input { width: 100px; }
    .collapse-header { cursor: pointer; }
    .small-muted { font-size: .85rem; color: #6c757d; }
  </style>
</head>
<body>

  <!-- ====== PLACEHOLDERS: plug your navbars here ====== -->
  <!-- <div class="top-nav-placeholder" style="padding: 30px;"></div> -->
  <div class="row" style="padding: 60px;">
    <div class="col-2">
      <!-- <div class="left-nav-placeholder"></div> -->
    </div>
    <div class="col-10">
      <!-- ====== Main content ====== -->

      <div class="container-fluid">

        <div class="card">
          <div class="card-body">
            <h3 class="card-title mb-3">RFP Submission Portal</h3>
            <p class="small-muted">Complete the sections below and submit your proposals.</p>

            <!-- Tabs -->
            <ul class="nav nav-tabs" id="rfpTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="mandatory-tab" data-bs-toggle="tab" data-bs-target="#mandatory" type="button" role="tab">Mandatory & Compliance</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="technical-tab" data-bs-toggle="tab" data-bs-target="#technical" type="button" role="tab">Technical Proposal</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="financial-tab" data-bs-toggle="tab" data-bs-target="#financial" type="button" role="tab">Financial Proposal</button>
              </li>
            </ul>

            <div class="tab-content mt-3">
              <!-- ================= MANDATORY & COMPLIANCE TAB ================= -->
              <div class="tab-pane fade show active" id="mandatory" role="tabpanel" aria-labelledby="mandatory-tab">

                <div class="mb-3">
                  <label class="form-label">Documents completion progress</label>
                  <div class="progress" style="height:24px;">
                    <div id="docsProgress" class="progress-bar" role="progressbar" style="width: 0%;">0%</div>
                  </div>
                  <div class="small text-muted mt-1" id="docsProgressText">0 of 0 documents valid</div>
                </div>

                <div class="table-responsive">
                  <table class="table table-bordered align-middle" id="mandatoryTable">
                    <thead class="table-light">
                      <tr>
                        <th>Document</th>
                        <th>Status</th>
                        <th>Uploaded Date</th>
                        <th class="text-center">View / Upload</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- example rows (you can populate dynamically from server) -->
                      <tr data-doc-id="1">
                        <td>Company Registration</td>
                        <td class="status-cell"><span class="badge bg-warning text-dark">Missing</span></td>
                        <td class="date-cell">—</td>
                        <td class="text-center">
                          <input type="file" class="d-none file-input" accept=".pdf,.doc,.docx,.jpg,.png" />
                          <button class="btn btn-sm btn-outline-primary btn-upload">Upload</button>
                          <button class="btn btn-sm btn-outline-secondary btn-view" disabled>View</button>
                        </td>
                      </tr>
                      <tr data-doc-id="2">
                        <td>Tax Compliance Certificate</td>
                        <td class="status-cell"><span class="badge bg-warning text-dark">Missing</span></td>
                        <td class="date-cell">—</td>
                        <td class="text-center">
                          <input type="file" class="d-none file-input" accept=".pdf,.doc,.docx,.jpg,.png" />
                          <button class="btn btn-sm btn-outline-primary btn-upload">Upload</button>
                          <button class="btn btn-sm btn-outline-secondary btn-view" disabled>View</button>
                        </td>
                      </tr>
                      <tr data-doc-id="3">
                        <td>Insurance Certificate</td>
                        <td class="status-cell"><span class="badge bg-warning text-dark">Missing</span></td>
                        <td class="date-cell">—</td>
                        <td class="text-center">
                          <input type="file" class="d-none file-input" accept=".pdf,.doc,.docx,.jpg,.png" />
                          <button class="btn btn-sm btn-outline-primary btn-upload">Upload</button>
                          <button class="btn btn-sm btn-outline-secondary btn-view" disabled>View</button>
                        </td>
                      </tr>
                      <!-- Add more rows as required -->
                    </tbody>
                  </table>
                </div>

              </div>

              <!-- ================= TECHNICAL PROPOSAL TAB ================= -->
              <div class="tab-pane fade" id="technical" role="tabpanel" aria-labelledby="technical-tab">
                <div class="mb-3">
                  <label class="form-label">Technical completion progress</label>
                  <div class="progress" style="height:20px;">
                    <div id="techProgress" class="progress-bar" role="progressbar" style="width: 0%;">0%</div>
                  </div>
                  <div class="small text-muted mt-1" id="techProgressText">0 of 4 sections completed</div>
                </div>

                <form id="technicalForm" class="mb-3">
                  <div class="accordion" id="technicalAccordion">

                    <!-- Compliance Experience -->
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                          Compliance Experience
                        </button>
                      </h2>
                      <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#technicalAccordion">
                        <div class="accordion-body">
                          <div class="mb-3">
                            <label class="form-label required">Describe compliance experience</label>
                            <textarea class="form-control required-input" rows="4" name="compliance_experience"></textarea>
                          </div>
                          <div class="mb-3">
                            <label class="form-label">Attach supporting documents (optional)</label>
                            <input type="file" class="form-control" accept=".pdf,.doc,.docx,.jpg,.png" multiple>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Understanding of TOR -->
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                          Understanding of Terms of Reference
                        </button>
                      </h2>
                      <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#technicalAccordion">
                        <div class="accordion-body">
                          <div class="mb-3">
                            <label class="form-label required">Explain your understanding of the TOR</label>
                            <textarea class="form-control required-input" rows="4" name="understanding_tor"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Methodology and Work Plan -->
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                          Methodology and Work Plan
                        </button>
                      </h2>
                      <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#technicalAccordion">
                        <div class="accordion-body">
                          <div class="mb-3">
                            <label class="form-label required">Describe methodology & work plan</label>
                            <textarea class="form-control required-input" rows="4" name="methodology"></textarea>
                          </div>
                          <div class="mb-3">
                            <label class="form-label">Attach Gantt / timeline (optional)</label>
                            <input type="file" class="form-control" accept=".pdf,.xlsx,.xls,.png,.jpg">
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Team Composition -->
                    <div class="accordion-item">
                      <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour">
                          Team Composition
                        </button>
                      </h2>
                      <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#technicalAccordion">
                        <div class="accordion-body">
                          <div class="mb-3">
                            <label class="form-label required">Provide team composition & CV summaries</label>
                            <textarea class="form-control required-input" rows="4" name="team_composition"></textarea>
                          </div>
                          <div class="mb-3">
                            <label class="form-label">Upload CVs (optional)</label>
                            <input type="file" class="form-control" accept=".pdf,.doc,.docx" multiple>
                          </div>

                          <div class="d-flex justify-content-end mt-3 gap-2">
                            <button id="saveTechnicalDraft" class="btn btn-outline-secondary">Save as Draft</button>
                            <button id="submitTechnical" class="btn btn-primary">Submit</button>
                          </div>
                        </div>
                      </div>
                    </div>

                  </div> <!-- accordion -->
                </form>

              </div>

              <!-- ================= FINANCIAL PROPOSAL TAB ================= -->
              <div class="tab-pane fade" id="financial" role="tabpanel" aria-labelledby="financial-tab">

                <div class="mb-3">
                  <label class="form-label">Financial completion progress</label>
                  <div class="progress" style="height:20px;">
                    <div id="finProgress" class="progress-bar" role="progressbar" style="width: 0%;">0%</div>
                  </div>
                  <div class="small text-muted mt-1" id="finProgressText">0 of required fields filled</div>
                </div>

                <div class="card">
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table table-sm table-bordered" id="financialTable">
                        <thead class="table-light">
                          <tr>
                            <th style="width:40%;">Financial Proposal (Description)</th>
                            <th style="width:10%;">Qty</th>
                            <th style="width:10%;">Unit</th>
                            <th style="width:15%;">Unit Cost</th>
                            <th style="width:15%;">Total Cost</th>
                            <th style="width:10%;">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- default sample row -->
                          <tr>
                            <td><input type="text" class="form-control form-control-sm fin-desc" placeholder="e.g., Service A"></td>
                            <td><input type="number" min="0" step="1" class="form-control form-control-sm fin-qty" value="1"></td>
                            <td><input type="text" class="form-control form-control-sm fin-unit" placeholder="unit"></td>
                            <td><input type="number" min="0" step="0.01" class="form-control form-control-sm fin-unitcost" value="0.00"></td>
                            <td class="text-end fin-total">0.00</td>
                            <td class="text-center"><button class="btn btn-sm btn-danger btn-delete-row">Delete</button></td>
                          </tr>
                        </tbody>
                        <tfoot>
                          <tr>
                            <td colspan="4" class="text-end"><strong>Grand Total</strong></td>
                            <td class="text-end"><strong id="grandTotal">0.00</strong></td>
                            <td></td>
                          </tr>
                        </tfoot>
                      </table>
                    </div>

                    <div class="d-flex justify-content-between">
                      <div>
                        <button id="addFinRow" class="btn btn-sm btn-outline-primary">Add Row</button>
                      </div>
                      <div>
                        <button id="saveFinancialDraft" class="btn btn-outline-secondary">Save as Draft</button>
                        <button id="submitFinancial" class="btn btn-success">Submit Financial Proposal</button>
                      </div>
                    </div>

                  </div>
                </div>

              </div>
            </div> <!-- tab-content -->

          </div>
        </div>

        <!-- modal to view uploaded doc -->
        <div class="modal fade" id="viewDocModal" tabindex="-1">
          <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">View Document</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body" id="viewDocBody">
                <!-- file preview or filename goes here -->
                <p class="mb-0"><strong>No preview available.</strong></p>
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>

      </div> <!-- container-fluid -->
    </div> <!-- col-10 -->
  </div> <!-- row -->

  <!-- Bootstrap 5 and Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // ========== Mandatory & Compliance logic ==========
    (function () {
      const table = document.getElementById('mandatoryTable');
      function updateDocsProgress() {
        const rows = Array.from(table.querySelectorAll('tbody tr'));
        const total = rows.length;
        const validCount = rows.filter(r => {
          const statusText = r.querySelector('.status-cell').innerText.trim().toLowerCase();
          return statusText === 'valid';
        }).length;
        const pct = total === 0 ? 0 : Math.round((validCount / total) * 100);
        const bar = document.getElementById('docsProgress');
        bar.style.width = pct + '%';
        bar.innerText = pct + '%';
        document.getElementById('docsProgressText').innerText = `${validCount} of ${total} documents valid`;
      }

      // wire upload buttons
      table.querySelectorAll('tbody tr').forEach(row => {
        const uploadBtn = row.querySelector('.btn-upload');
        const fileInput = row.querySelector('.file-input');
        const viewBtn = row.querySelector('.btn-view');
        const statusCell = row.querySelector('.status-cell');
        const dateCell = row.querySelector('.date-cell');

        uploadBtn.addEventListener('click', () => fileInput.click());

        fileInput.addEventListener('change', () => {
          if (!fileInput.files || fileInput.files.length === 0) return;
          const filename = fileInput.files[0].name;
          // simulate upload + mark as Valid
          statusCell.innerHTML = '<span class="badge bg-success">Valid</span>';
          const now = new Date();
          dateCell.textContent = now.toLocaleString();
          viewBtn.disabled = false;
          viewBtn.dataset.filename = filename;
          updateDocsProgress();
        });

        viewBtn.addEventListener('click', () => {
          const modal = new bootstrap.Modal(document.getElementById('viewDocModal'));
          const body = document.getElementById('viewDocBody');
          body.innerHTML = `<p><strong>Filename:</strong> ${viewBtn.dataset.filename || 'Unknown'}</p>
                            <p class="small text-muted">Preview not available in this demo. Replace with file viewer as needed.</p>`;
          modal.show();
        });
      });

      // initial calc
      updateDocsProgress();
    })();

    // ========== Technical Proposal logic ==========
    (function () {
      const techForm = document.getElementById('technicalForm');
      const requiredInputsSelector = '.required-input';
      const progressBar = document.getElementById('techProgress');
      const progressText = document.getElementById('techProgressText');

      function updateTechProgress() {
        const sections = Array.from(document.querySelectorAll('#technicalAccordion .accordion-item'));
        const totalSections = sections.length;
        let completed = 0;
        sections.forEach(section => {
          // find required inputs inside this section
          const req = section.querySelectorAll(requiredInputsSelector);
          let sectionComplete = true;
          if (req.length === 0) sectionComplete = false;
          req.forEach(i => {
            if (!i.value || i.value.trim() === '') sectionComplete = false;
          });
          if (sectionComplete) completed++;
        });
        const pct = Math.round((completed / totalSections) * 100);
        progressBar.style.width = pct + '%';
        progressBar.innerText = pct + '%';
        progressText.innerText = `${completed} of ${totalSections} sections completed`;
      }

      // live listen for changes
      techForm.addEventListener('input', updateTechProgress);
      // buttons
      document.getElementById('saveTechnicalDraft').addEventListener('click', (e) => {
        e.preventDefault();
        // gather data and save locally (simulation)
        const formData = new FormData(techForm);
        // In production: send to backend via fetch/AJAX to save draft
        alert('Technical draft saved (simulation).');
      });
      document.getElementById('submitTechnical').addEventListener('click', (e) => {
        e.preventDefault();
        // basic validation: ensure required fields are filled
        const reqs = techForm.querySelectorAll(requiredInputsSelector);
        let ok = true;
        reqs.forEach(i => {
          i.classList.remove('is-invalid');
          if (!i.value || i.value.trim() === '') {
            i.classList.add('is-invalid');
            ok = false;
          }
        });
        if (!ok) {
          alert('Please complete all required technical sections before submitting.');
          updateTechProgress();
          return;
        }
        // collect and submit (simulation)
        alert('Technical proposal submitted (simulation).');
      });

      // initial progress
      updateTechProgress();
    })();

    // ========== Financial Proposal logic ==========
    (function () {
      const table = document.getElementById('financialTable');
      const tbody = table.querySelector('tbody');
      const grandTotalEl = document.getElementById('grandTotal');
      const finProgressBar = document.getElementById('finProgress');
      const finProgressText = document.getElementById('finProgressText');

      function recalcRow(row) {
        const qty = parseFloat(row.querySelector('.fin-qty').value) || 0;
        const unitcost = parseFloat(row.querySelector('.fin-unitcost').value) || 0;
        const total = qty * unitcost;
        row.querySelector('.fin-total').innerText = total.toFixed(2);
        recalcGrand();
      }

      function recalcGrand() {
        const rows = Array.from(tbody.querySelectorAll('tr'));
        let sum = 0;
        let filledCount = 0;
        rows.forEach(r => {
          const desc = r.querySelector('.fin-desc').value.trim();
          const qty = parseFloat(r.querySelector('.fin-qty').value) || 0;
          const unit = r.querySelector('.fin-unit').value.trim();
          const unitcost = parseFloat(r.querySelector('.fin-unitcost').value) || 0;
          const rowTotal = qty * unitcost;
          sum += rowTotal;
          // consider a row 'filled' if desc and qty>0 and unitcost>0
          if (desc && qty > 0 && unitcost > 0) filledCount++;
        });
        grandTotalEl.innerText = sum.toFixed(2);

        // progress logic: percent of rows filled vs total (simple heuristic)
        const totalRows = rows.length || 1;
        const pct = Math.round((filledCount / totalRows) * 100);
        finProgressBar.style.width = pct + '%';
        finProgressBar.innerText = pct + '%';
        finProgressText.innerText = `${filledCount} of ${totalRows} items filled`;
      }

      // delegate input events
      tbody.addEventListener('input', (e) => {
        const row = e.target.closest('tr');
        if (!row) return;
        if (e.target.classList.contains('fin-qty') || e.target.classList.contains('fin-unitcost')) {
          recalcRow(row);
        } else {
          recalcGrand();
        }
      });

      // add row
      document.getElementById('addFinRow').addEventListener('click', () => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><input type="text" class="form-control form-control-sm fin-desc" placeholder="e.g., Service A"></td>
          <td><input type="number" min="0" step="1" class="form-control form-control-sm fin-qty" value="1"></td>
          <td><input type="text" class="form-control form-control-sm fin-unit" placeholder="unit"></td>
          <td><input type="number" min="0" step="0.01" class="form-control form-control-sm fin-unitcost" value="0.00"></td>
          <td class="text-end fin-total">0.00</td>
          <td class="text-center"><button class="btn btn-sm btn-danger btn-delete-row">Delete</button></td>
        `;
        tbody.appendChild(tr);
        recalcGrand();
      });

      // delete row (delegate)
      tbody.addEventListener('click', (e) => {
        if (e.target.classList.contains('btn-delete-row')) {
          const row = e.target.closest('tr');
          if (row) {
            row.remove();
            recalcGrand();
          }
        }
      });

      document.getElementById('saveFinancialDraft').addEventListener('click', (e) => {
        e.preventDefault();
        // gather financial rows and save (simulation)
        alert('Financial draft saved (simulation).');
      });

      document.getElementById('submitFinancial').addEventListener('click', (e) => {
        e.preventDefault();
        // basic validation - ensure at least one filled row
        const rows = Array.from(tbody.querySelectorAll('tr'));
        const filled = rows.filter(r => {
          const desc = r.querySelector('.fin-desc').value.trim();
          const qty = parseFloat(r.querySelector('.fin-qty').value) || 0;
          const unitcost = parseFloat(r.querySelector('.fin-unitcost').value) || 0;
          return desc && qty > 0 && unitcost > 0;
        });
        if (filled.length === 0) {
          alert('Please enter at least one financial item with description, quantity and unit cost.');
          return;
        }
        // submit (simulation)
        alert('Financial proposal submitted (simulation).');
      });

      // initialize calculations
      recalcGrand();
    })();
  </script>

</body>
</html>


  <script>
    // Sample data
    const rfps = [
      { id: 1, code: "RFP-203", project: "Hospital Management System", deadline: "2025-11-20", status: "Open" },
      { id: 2, code: "RFP-204", project: "Network Infrastructure Upgrade", deadline: "2025-12-10", status: "Open" }
    ];

    const rfpList = document.getElementById('rfpList');
    const uploadModal = new bootstrap.Modal(document.getElementById('uploadModal'));
    const uploadForm = document.getElementById('uploadForm');

    // Populate table
    rfps.forEach((r, i) => {
      rfpList.innerHTML += `
        <tr>
          <td>${i + 1}</td>
          <td>${r.code}</td>
          <td>${r.project}</td>
          <td>${r.deadline}</td>
          <td><span class="badge bg-success">${r.status}</span></td>
          <td><button class="btn btn-sm btn-primary" onclick="openUploadForm(${r.id})">Upload Proposal</button></td>
        </tr>`;
    });

    // Function to open the modal
    function openUploadForm(id) {
      document.getElementById('rfpId').value = id;
      uploadModal.show();
    }

    // Handle form submission
    uploadForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(uploadForm);
      const rfpId = formData.get('rfp_id');

      // Example: Replace this with a real API call
      alert(`✅ Proposal for RFP ID ${rfpId} submitted successfully!`);
      uploadForm.reset();
      uploadModal.hide();
    });
  </script>
  <script>
    // Sidebar submenu toggles (preserve initial markup, only enhance)
    document.querySelectorAll('[data-toggle="submenu"]').forEach(btn=>{
      btn.addEventListener('click', function(e){
        e.preventDefault();
        const target = this.getAttribute('data-target');
        const el = document.getElementById(target);
        if (!el) return;
        el.classList.toggle('show');
        // rotate plus icon visual: toggle caret or plus (optional)
        const icon = this.querySelector('.bi');
        if (icon) icon.classList.toggle('bi-rotate-90');
      });
    });

    // Mobile hamburger toggles the sidebar visibility
    const hamburger = document.getElementById('hamburgerBtn');
    const sidebar = document.getElementById('sidebar');
    const topbar = document.getElementById('topbar');
    const content = document.getElementById('content');

    hamburger && hamburger.addEventListener('click', ()=> {
      sidebar.classList.toggle('visible'); // CSS handles transform for small screens
    });

    // Global: close any open popup
    function closeAllFloating(){
      document.querySelectorAll('.floating-popup, .floating-popup').forEach(el => el.style.display = 'none');
      document.getElementById('profileMenu').style.display = 'none';
    }

    // Position and show a floating popup next to the clicked icon
    function showPopup(popupEl, triggerEl){
      closeAllFloating();
      const rect = triggerEl.getBoundingClientRect();
      const popup = popupEl;
      // place above or below depending on available space
      const scrollY = window.scrollY || window.pageYOffset;
      let top = rect.bottom + scrollY + 8;
      let left = Math.min(window.innerWidth - popup.offsetWidth - 12, rect.left + window.scrollX - popup.offsetWidth/2 + rect.width/2);
      popup.style.top = top + 'px';
      popup.style.left = left + 'px';
      popup.style.display = 'block';
    }

    // tidy helper to find elements
    const emailIcon = document.getElementById('emailIcon');
    const smsIcon = document.getElementById('smsIcon');
    const notifIcon = document.getElementById('notifIcon');
    const emailPopup = document.getElementById('emailPopup');
    const smsPopup = document.getElementById('smsPopup');
    const notifPopup = document.getElementById('notifPopup');
    const profileIcon = document.getElementById('profileIcon');
    const profileMenu = document.getElementById('profileMenu');

    // toggle handlers
    emailIcon && emailIcon.addEventListener('click', (e)=> {
      showPopup(emailPopup, emailIcon);
      e.stopPropagation();
    });
    smsIcon && smsIcon.addEventListener('click', (e)=> {
      showPopup(smsPopup, smsIcon);
      e.stopPropagation();
    });
    notifIcon && notifIcon.addEventListener('click', (e)=> {
      showPopup(notifPopup, notifIcon);
      e.stopPropagation();
    });

    profileIcon && profileIcon.addEventListener('click', (e)=>{
      // position profile menu under the icon (right corner)
      closeAllFloating();
      const rect = profileIcon.getBoundingClientRect();
      const scrollY = window.scrollY || window.pageYOffset;
      profileMenu.style.top = rect.bottom + scrollY + 8 + 'px';
      profileMenu.style.left = (rect.left + rect.width/2 - profileMenu.offsetWidth/2) + 'px';
      profileMenu.style.display = 'block';
      e.stopPropagation();
    });

    // click outside closes popups
    document.addEventListener('click', function(e){
      // if click inside any floating popup or icon, ignore
      const targets = [emailPopup, smsPopup, notifPopup, profileMenu];
      if (!e.target.closest('.nav-icon') && !targets.some(t => t && t.contains(e.target))) {
        closeAllFloating();
      }
    });

    // Card modal: show appropriate content when a card is clicked
    document.querySelectorAll('.stat-card').forEach(card=>{
      card.addEventListener('click', function(){
        const title = this.getAttribute('data-card') || 'Details';
        const titleEl = document.getElementById('detailModalTitle');
        const bodyEl = document.getElementById('detailModalBody');
        titleEl.textContent = title;
        bodyEl.innerHTML = `<strong>${title}</strong><br/>This is demo content for <em>${title}</em>. You can wire this to real data or link the 'View All' to the relevant page.`;
        // open bootstrap modal programmatically
        const modal = new bootstrap.Modal(document.getElementById('detailModal'));
        modal.show();
      });
    });

    // close popups on resize to avoid misplaced popup
    window.addEventListener('resize', closeAllFloating);

  </script>
</body>
</html>
